<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Apprenez le japonais : hiragana, katakana et vocabulaire">
    <meta name="theme-color" content="#667eea">
    <title>Apprendre le Japonais - Hiragana</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <!-- Container principal -->
    <div id="app">
        <!-- Ã‰cran de chargement -->
        <div id="loading-screen" class="screen">
            <div class="loading-content">
                <h1 class="loading-title">æ—¥æœ¬èª</h1>
                <p class="loading-subtitle">Apprendre le Japonais</p>
                <div class="loading-spinner"></div>
            </div>
        </div>

        <!-- Menu Hamburger -->
        <div id="hamburger-menu" class="hamburger-menu">
            <div class="menu-overlay" id="menu-overlay"></div>
            <div class="menu-content">
                <div class="menu-header">
                    <div class="menu-user-profile">
                        <div class="user-avatar">æ—¥</div>
                        <div class="user-info">
                            <p class="user-name" id="menu-username">Ã‰tudiant</p>
                            <p class="user-level-text">Niveau <span id="menu-user-level">1</span></p>
                        </div>
                    </div>
                    <button class="menu-close-btn" id="menu-close-btn">âœ•</button>
                </div>

                <div class="menu-stats-grid">
                    <div class="menu-stat-card">
                        <div class="menu-stat-icon">ğŸ”¥</div>
                        <div class="menu-stat-value" id="menu-streak">0</div>
                        <div class="menu-stat-label">Jours de sÃ©rie</div>
                    </div>
                    <div class="menu-stat-card">
                        <div class="menu-stat-icon">â­</div>
                        <div class="menu-stat-value" id="menu-points">0</div>
                        <div class="menu-stat-label">Points XP</div>
                    </div>
                    <div class="menu-stat-card">
                        <div class="menu-stat-icon">ğŸ…</div>
                        <div class="menu-stat-value" id="menu-badges">0</div>
                        <div class="menu-stat-label">Badges</div>
                    </div>
                </div>

                <nav class="menu-nav">
                    <a href="#" class="menu-nav-item" id="menu-home">
                        <span class="menu-nav-icon">ğŸ </span>
                        <span class="menu-nav-label">Accueil</span>
                    </a>
                    <a href="#" class="menu-nav-item" id="menu-leaderboard">
                        <span class="menu-nav-icon">ğŸ†</span>
                        <span class="menu-nav-label">Classement</span>
                        <span class="menu-nav-badge">TOP 50</span>
                    </a>
                    <a href="#" class="menu-nav-item" id="menu-stats">
                        <span class="menu-nav-icon">ğŸ“Š</span>
                        <span class="menu-nav-label">Statistiques</span>
                    </a>
                    <a href="#" class="menu-nav-item" id="menu-badges">
                        <span class="menu-nav-icon">ğŸ–ï¸</span>
                        <span class="menu-nav-label">Badges</span>
                        <span class="menu-nav-notification" id="new-badge-dot" style="display: none;"></span>
                    </a>
                    <div class="menu-divider"></div>
                    <a href="#" class="menu-nav-item" id="menu-settings">
                        <span class="menu-nav-icon">âš™ï¸</span>
                        <span class="menu-nav-label">ParamÃ¨tres</span>
                    </a>
                </nav>

                <div class="menu-footer">
                    <p class="menu-version">Version 4.9.1</p>
                </div>
            </div>
        </div>

        <!-- Ã‰cran d'accueil -->
        <div id="home-screen" class="screen" style="display: none;">
            <header class="app-header-new">
                <button class="hamburger-btn" id="hamburger-btn">
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                </button>

                <h1 class="app-title-new">æ—¥æœ¬èª</h1>

                <div class="header-streak">
                    <div class="streak-flame-container">
                        <span class="streak-flame">ğŸ”¥</span>
                        <span class="streak-number" id="header-streak">0</span>
                    </div>
                </div>
            </header>

            <!-- Barre de progression niveau avec XP -->
            <div class="level-progress-bar">
                <div class="level-info">
                    <span class="level-badge">
                        <span class="level-icon">ğŸ†</span>
                        <span class="level-text">Niveau <span id="header-level">1</span></span>
                    </span>
                    <span class="xp-text"><span id="header-xp">0</span> XP</span>
                </div>
                <div class="xp-bar-container">
                    <div class="xp-bar" id="xp-bar" style="width: 0%"></div>
                </div>
            </div>

            <div class="content">
                <section class="progress-section">
                    <h2 class="section-title">Votre progression</h2>
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="global-progress" style="width: 0%"></div>
                    </div>
                    <p class="progress-text"><span id="completed-lessons">0</span>/10 leÃ§ons complÃ©tÃ©es</p>
                </section>

                <!-- Mode Express 90s -->
                <div class="express-mode-section">
                    <div class="express-mode-card">
                        <div class="express-mode-icon">âš¡</div>
                        <div class="express-mode-info">
                            <h3 class="express-mode-title">Mode Express 90s</h3>
                            <p class="express-mode-description">5 questions Â· Chrono 90 secondes</p>
                        </div>
                        <button class="primary-btn express-btn" id="start-express-btn">GO!</button>
                    </div>
                </div>

                <!-- Mode Histoire/Aventure -->
                <div class="story-mode-section">
                    <div class="story-mode-card">
                        <div class="story-mode-icon">ğŸ“–</div>
                        <div class="story-mode-info">
                            <h3 class="story-mode-title">Mode Histoire : Voyage au Japon</h3>
                            <p class="story-mode-description">Une aventure Ã  travers le Japon Â· <span id="story-progress-percent">9%</span> complÃ©tÃ©</p>
                        </div>
                        <button class="primary-btn story-btn" id="start-story-btn">Explorer ğŸ—ºï¸</button>
                    </div>
                </div>

                <!-- Phrase Culturelle du Jour -->
                <div class="cultural-phrase-section">
                    <div class="cultural-phrase-card" id="cultural-phrase-card">
                        <div class="cultural-phrase-header">
                            <div class="cultural-phrase-date">
                                <span class="cultural-phrase-icon">ğŸŒ¸</span>
                                <span class="cultural-phrase-label">Phrase du jour</span>
                            </div>
                            <div class="cultural-phrase-collection">
                                <span id="viewed-phrases-count">0</span>/30
                            </div>
                        </div>
                        <div class="cultural-phrase-content">
                            <div class="cultural-phrase-japanese">
                                <div class="cultural-phrase-hiragana" id="today-phrase-hiragana">ã„ãŸã ãã¾ã™</div>
                                <div class="cultural-phrase-romaji" id="today-phrase-romaji">Itadakimasu</div>
                            </div>
                            <div class="cultural-phrase-french" id="today-phrase-french">Bon appÃ©tit !</div>
                            <button class="cultural-phrase-btn" id="view-phrase-detail-btn">
                                DÃ©couvrir <span class="cultural-phrase-arrow">â†’</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Bouton Mode RÃ©vision -->
                <div id="review-mode-section" class="review-mode-section" style="display: none;">
                    <div class="review-mode-card">
                        <div class="review-mode-icon">ğŸ”„</div>
                        <div class="review-mode-info">
                            <h3 class="review-mode-title">Mode RÃ©vision</h3>
                            <p class="review-mode-description"><span id="mistakes-count">0</span> caractÃ¨re(s) Ã  rÃ©viser</p>
                        </div>
                        <button class="primary-btn" id="start-review-btn">Commencer</button>
                    </div>
                </div>

                <section class="lessons-section">
                    <h2 class="section-title">LeÃ§ons d'hiragana</h2>
                    <div id="lessons-list" class="lessons-grid">
                        <!-- Les leÃ§ons seront insÃ©rÃ©es ici par JavaScript -->
                    </div>
                </section>
            </div>

            <footer class="app-footer">
                <button class="footer-btn" id="stats-btn">
                    <span class="btn-icon">ğŸ“Š</span>
                    <span class="btn-label">Statistiques</span>
                </button>
                <button class="footer-btn" id="leaderboard-btn">
                    <span class="btn-icon">ğŸ†</span>
                    <span class="btn-label">Classement</span>
                </button>
                <button class="footer-btn" id="badges-btn">
                    <span class="btn-icon">ğŸ…</span>
                    <span class="btn-label">Badges</span>
                </button>
                <button class="footer-btn" id="settings-btn">
                    <span class="btn-icon">âš™ï¸</span>
                    <span class="btn-label">RÃ©glages</span>
                </button>
            </footer>
        </div>

        <!-- Ã‰cran de configuration de leÃ§on -->
        <div id="config-screen" class="screen" style="display: none;">
            <header class="lesson-header">
                <button class="back-btn" id="config-back-btn">â† Retour</button>
                <h2 class="lesson-title" id="config-lesson-title">LeÃ§on 1</h2>
            </header>

            <div class="content config-content">
                <div class="config-card">
                    <h3 class="config-title">âš™ï¸ Configuration de la leÃ§on</h3>
                    <p class="config-description" id="config-description">Choisissez le nombre de questions</p>

                    <div class="config-options">
                        <button class="config-option active" data-questions="10">
                            <span class="option-number">10</span>
                            <span class="option-label">questions</span>
                            <span class="option-time">~5 min</span>
                        </button>
                        <button class="config-option" data-questions="15">
                            <span class="option-number">15</span>
                            <span class="option-label">questions</span>
                            <span class="option-time">~8 min</span>
                        </button>
                        <button class="config-option" data-questions="20">
                            <span class="option-number">20</span>
                            <span class="option-label">questions</span>
                            <span class="option-time">~10 min</span>
                        </button>
                    </div>

                    <button class="start-lesson-btn" id="start-lesson-btn">
                        Commencer la leÃ§on
                    </button>
                </div>
            </div>
        </div>

        <!-- Ã‰cran de leÃ§on -->
        <div id="lesson-screen" class="screen" style="display: none;">
            <header class="lesson-header">
                <button class="back-btn" id="lesson-back-btn">â† Quitter</button>
                <div class="lesson-progress">
                    <span id="current-question">1</span>/<span id="total-questions">10</span>
                </div>
                <div class="lesson-score">
                    Score: <span id="current-score">0</span>
                </div>
            </header>

            <div class="lesson-progress-bar-container">
                <div class="lesson-progress-bar" id="lesson-progress-bar" style="width: 0%"></div>
            </div>

            <div class="content lesson-content" id="exercise-container">
                <!-- Les exercices seront insÃ©rÃ©s ici dynamiquement -->
            </div>
        </div>

        <!-- Ã‰cran de rÃ©sultats -->
        <div id="results-screen" class="screen" style="display: none;">
            <div class="content results-content">
                <div class="results-card">
                    <div class="results-icon" id="results-icon">ğŸ‰</div>
                    <h2 class="results-title" id="results-title">FÃ©licitations !</h2>
                    <p class="results-subtitle" id="results-subtitle">LeÃ§on terminÃ©e</p>

                    <div class="results-stats">
                        <div class="result-stat">
                            <span class="result-stat-label">Score</span>
                            <span class="result-stat-value" id="final-score">0/10</span>
                        </div>
                        <div class="result-stat">
                            <span class="result-stat-label">PrÃ©cision</span>
                            <span class="result-stat-value" id="final-accuracy">0%</span>
                        </div>
                        <div class="result-stat">
                            <span class="result-stat-label">Points gagnÃ©s</span>
                            <span class="result-stat-value" id="points-earned">+0</span>
                        </div>
                    </div>

                    <div class="results-badges" id="results-badges" style="display: none;">
                        <h3 class="badges-title">ğŸ… Nouveaux badges dÃ©bloquÃ©s !</h3>
                        <div id="unlocked-badges-list" class="unlocked-badges-list">
                            <!-- Les badges dÃ©bloquÃ©s seront insÃ©rÃ©s ici -->
                        </div>
                    </div>

                    <div class="results-actions">
                        <button class="secondary-btn" id="retry-btn">ğŸ”„ Refaire</button>
                        <button class="primary-btn" id="continue-btn">âœ… Continuer</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ã‰cran des badges -->
        <div id="badges-screen" class="screen" style="display: none;">
            <header class="lesson-header">
                <button class="back-btn" id="badges-back-btn">â† Retour</button>
                <h2 class="lesson-title">ğŸ… Mes Badges</h2>
            </header>

            <div class="content">
                <div id="badges-list" class="badges-grid">
                    <!-- Les badges seront insÃ©rÃ©s ici -->
                </div>
            </div>
        </div>

        <!-- Ã‰cran des statistiques -->
        <div id="stats-screen" class="screen" style="display: none;">
            <header class="lesson-header">
                <button class="back-btn" id="stats-back-btn">â† Retour</button>
                <h2 class="lesson-title">ğŸ“Š Mes Statistiques</h2>
            </header>

            <div class="content stats-content">
                <!-- Carte du profil utilisateur -->
                <div class="stats-card profile-card">
                    <div class="profile-header">
                        <div class="profile-avatar">ğŸ‘¤</div>
                        <div class="profile-info">
                            <h3 class="profile-name">Niveau <span id="stats-level">1</span></h3>
                            <div class="profile-progress-bar">
                                <div class="profile-progress-fill" id="stats-level-progress" style="width: 0%"></div>
                            </div>
                            <p class="profile-next-level"><span id="stats-points-to-next">100</span> points pour le niveau suivant</p>
                        </div>
                    </div>

                    <div class="profile-stats-grid">
                        <div class="profile-stat">
                            <span class="profile-stat-icon">â­</span>
                            <span class="profile-stat-value" id="stats-total-points">0</span>
                            <span class="profile-stat-label">Points totaux</span>
                        </div>
                        <div class="profile-stat">
                            <span class="profile-stat-icon">ğŸ”¥</span>
                            <span class="profile-stat-value" id="stats-streak">0</span>
                            <span class="profile-stat-label">Jours consÃ©cutifs</span>
                        </div>
                        <div class="profile-stat">
                            <span class="profile-stat-icon">ğŸ“š</span>
                            <span class="profile-stat-value" id="stats-lessons-completed">0</span>
                            <span class="profile-stat-label">LeÃ§ons rÃ©ussies</span>
                        </div>
                        <div class="profile-stat">
                            <span class="profile-stat-icon">ğŸ…</span>
                            <span class="profile-stat-value" id="stats-badges-count">0</span>
                            <span class="profile-stat-label">Badges dÃ©bloquÃ©s</span>
                        </div>
                    </div>
                </div>

                <!-- Carte de progression des leÃ§ons -->
                <div class="stats-card">
                    <h3 class="stats-card-title">ğŸ“– Progression des leÃ§ons</h3>
                    <div id="lessons-stats-list" class="lessons-stats-list">
                        <!-- Les statistiques des leÃ§ons seront insÃ©rÃ©es ici -->
                    </div>
                </div>

                <!-- Carte des activitÃ©s rÃ©centes -->
                <div class="stats-card">
                    <h3 class="stats-card-title">ğŸ“… ActivitÃ© rÃ©cente</h3>
                    <div class="activity-item">
                        <span class="activity-icon">ğŸ“†</span>
                        <div class="activity-info">
                            <span class="activity-label">DerniÃ¨re session</span>
                            <span class="activity-value" id="stats-last-study">Jamais</span>
                        </div>
                    </div>
                    <div class="activity-item">
                        <span class="activity-icon">âœï¸</span>
                        <div class="activity-info">
                            <span class="activity-label">Transcriptions complÃ©tÃ©es</span>
                            <span class="activity-value" id="stats-transcriptions">0</span>
                        </div>
                    </div>
                    <div class="activity-item">
                        <span class="activity-icon">ğŸ“</span>
                        <div class="activity-info">
                            <span class="activity-label">Mots appris</span>
                            <span class="activity-value" id="stats-words">0</span>
                        </div>
                    </div>
                </div>

                <!-- Carte des caractÃ¨res Ã  rÃ©viser -->
                <div id="mistakes-stats-card" class="stats-card" style="display: none;">
                    <h3 class="stats-card-title">ğŸ”„ CaractÃ¨res Ã  rÃ©viser</h3>
                    <div id="mistakes-stats-list" class="mistakes-stats-list">
                        <!-- Les caractÃ¨res avec erreurs seront insÃ©rÃ©s ici -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Ã‰cran Leaderboard -->
        <div id="leaderboard-screen" class="screen" style="display: none;">
            <header class="lesson-header">
                <button class="back-btn" id="leaderboard-back-btn">â† Retour</button>
                <h2 class="lesson-title">ğŸ† Classement Mondial</h2>
            </header>

            <div class="content">
                <!-- Carte du rang de l'utilisateur -->
                <div id="user-rank-card" class="user-rank-card" style="display: none;">
                    <h3 class="user-rank-title">Votre classement</h3>
                    <div class="user-rank-info">
                        <div class="user-rank-position" id="user-rank-position">#-</div>
                        <div class="user-rank-details">
                            <div class="user-rank-username" id="user-rank-username">Username</div>
                            <div class="user-rank-xp"><span id="user-rank-xp">0</span> XP</div>
                        </div>
                    </div>
                </div>

                <!-- Top 50 mondial -->
                <div class="leaderboard-container">
                    <h3 class="leaderboard-header">ğŸŒ Top 50 Mondial</h3>
                    <div id="leaderboard-list" class="leaderboard-list">
                        <!-- Les entrÃ©es du leaderboard seront insÃ©rÃ©es ici -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Ã‰cran Mode Express - Jeu -->
        <div id="express-game-screen" class="screen" style="display: none;">
            <header class="lesson-header express-header">
                <button class="back-btn" id="express-quit-btn">âœ• Quitter</button>
                <div class="express-timer-container">
                    <span class="express-timer-icon">â±ï¸</span>
                    <span class="express-timer" id="express-timer">90</span>
                </div>
                <div class="express-progress">
                    <span id="express-current-q">1</span>/<span id="express-total-q">5</span>
                </div>
            </header>

            <div class="content express-content">
                <div id="express-question-container" class="express-question">
                    <!-- Les questions seront insÃ©rÃ©es ici -->
                </div>
            </div>
        </div>

        <!-- Ã‰cran Mode Express - RÃ©sultats -->
        <div id="express-results-screen" class="screen" style="display: none;">
            <header class="lesson-header">
                <h2 class="lesson-title">âš¡ Mode Express 90s</h2>
            </header>

            <div class="content express-results-content">
                <div class="express-results-card">
                    <div class="express-results-score">
                        <div class="express-score-circle">
                            <span class="express-score-value" id="express-final-score">0</span>
                            <span class="express-score-total">/5</span>
                        </div>
                        <h3 class="express-results-title" id="express-results-title">Bravo !</h3>
                        <p class="express-results-time">
                            ComplÃ©tÃ© en <span id="express-time-taken">0</span>s
                        </p>
                    </div>

                    <div class="express-results-stats">
                        <div class="express-stat">
                            <span class="express-stat-icon">âœ…</span>
                            <span class="express-stat-value" id="express-correct">0</span>
                            <span class="express-stat-label">Corrects</span>
                        </div>
                        <div class="express-stat">
                            <span class="express-stat-icon">âŒ</span>
                            <span class="express-stat-value" id="express-wrong">0</span>
                            <span class="express-stat-label">Erreurs</span>
                        </div>
                    </div>

                    <div class="express-results-actions">
                        <button class="primary-btn" id="express-retry-btn">ğŸ”„ Rejouer</button>
                        <button class="secondary-btn" id="express-home-btn">ğŸ  Accueil</button>
                    </div>
                </div>

                <!-- Canvas pour les confettis -->
                <canvas id="confetti-canvas" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;"></canvas>
            </div>
        </div>
    </div>

        <!-- Ã‰cran Mode Histoire - Carte Interactive -->
        <div id="story-map-screen" class="screen" style="display: none;">
            <header class="app-header-new">
                <button class="back-btn" id="story-back-btn">â† Retour</button>
                <h1 class="app-title-new">Voyage au Japon ğŸ—¾</h1>
                <div class="story-progress-badge">
                    <span id="story-chapters-completed">1</span>/11
                </div>
            </header>

            <div class="content story-content">
                <!-- Introduction de l'histoire -->
                <div class="story-intro-card">
                    <div class="story-intro-icon">ğŸ‡¯ğŸ‡µ</div>
                    <h2 class="story-intro-title">L'aventure d'un voyageur sans mots</h2>
                    <p class="story-intro-text">
                        Vous venez d'arriver Ã  Tokyo. Vous ne parlez pas un mot de japonais.
                        Votre aventure commence maintenant... Explorez le Japon et dÃ©bloquez
                        chaque lieu en complÃ©tant les leÃ§ons !
                    </p>
                </div>

                <!-- Carte interactive du Japon -->
                <div class="japan-map-container">
                    <h3 class="map-title">ğŸ—ºï¸ Carte du Japon</h3>
                    <div class="japan-map">
                        <!-- Les points de la carte seront insÃ©rÃ©s ici par JavaScript -->
                        <div id="map-points"></div>

                        <!-- Illustration stylisÃ©e du Japon -->
                        <div class="map-background">
                            <div class="map-island"></div>
                        </div>
                    </div>
                </div>

                <!-- Liste des chapitres -->
                <div class="chapters-list">
                    <h3 class="chapters-title">ğŸ“š Chapitres de votre voyage</h3>
                    <div id="chapters-container">
                        <!-- Les chapitres seront insÃ©rÃ©s ici par JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal dÃ©tail chapitre -->
        <div id="chapter-modal" class="modal" style="display: none;">
            <div class="modal-overlay" id="chapter-modal-overlay"></div>
            <div class="modal-content chapter-modal-content">
                <button class="modal-close-btn" id="close-chapter-modal">âœ•</button>
                <div class="chapter-detail">
                    <div class="chapter-location" id="modal-chapter-location">ğŸ›¬ AÃ©roport Narita</div>
                    <h3 class="chapter-title" id="modal-chapter-title">ArrivÃ©e Ã  Tokyo</h3>

                    <div class="chapter-story">
                        <p class="chapter-intro" id="modal-chapter-intro">Vous venez d'atterrir...</p>

                        <div class="chapter-challenge">
                            <strong>ğŸ¯ Votre mission :</strong>
                            <p id="modal-chapter-challenge">Apprendre les bases...</p>
                        </div>

                        <div class="chapter-characters" id="modal-chapter-characters">
                            <!-- Personnages du chapitre -->
                        </div>

                        <div class="chapter-reward">
                            <strong>ğŸ RÃ©compense :</strong>
                            <p id="modal-chapter-reward">Badge dÃ©bloquÃ©</p>
                        </div>
                    </div>

                    <button class="primary-btn chapter-start-btn" id="modal-start-lesson">
                        Commencer cette aventure
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de badge dÃ©bloquÃ© -->
    <div id="badge-modal" class="modal" style="display: none;">
        <div class="modal-overlay"></div>
        <div class="modal-content badge-modal-content">
            <div class="badge-unlock-animation">
                <div class="badge-icon-large" id="modal-badge-icon">ğŸ†</div>
                <h3 class="badge-unlock-title">Nouveau badge dÃ©bloquÃ© !</h3>
                <h4 class="badge-name" id="modal-badge-name">Badge Name</h4>
                <p class="badge-description" id="modal-badge-description">Description</p>
                <button class="primary-btn" id="close-badge-modal">Super !</button>
            </div>
        </div>
    </div>

    <!-- Modal Phrase Culturelle -->
    <div id="phrase-modal" class="modal" style="display: none;">
        <div class="modal-overlay" id="phrase-modal-overlay"></div>
        <div class="modal-content phrase-modal-content">
            <button class="modal-close-btn" id="close-phrase-modal">âœ•</button>

            <div class="phrase-detail">
                <!-- En-tÃªte avec icÃ´ne et catÃ©gorie -->
                <div class="phrase-header-detail">
                    <div class="phrase-icon-large" id="modal-phrase-icon">ğŸ±</div>
                    <div class="phrase-category-badge" id="modal-phrase-category">Nourriture</div>
                </div>

                <!-- Expression japonaise -->
                <div class="phrase-japanese-detail">
                    <div class="phrase-hiragana-large" id="modal-phrase-hiragana">ã„ãŸã ãã¾ã™</div>
                    <div class="phrase-romaji-detail" id="modal-phrase-romaji">Itadakimasu</div>
                </div>

                <!-- Traduction et sens littÃ©ral -->
                <div class="phrase-translations">
                    <div class="phrase-french-detail" id="modal-phrase-french">Bon appÃ©tit !</div>
                    <div class="phrase-literal" id="modal-phrase-literal">
                        <strong>Sens littÃ©ral :</strong> Je reÃ§ois humblement
                    </div>
                </div>

                <!-- Contexte d'utilisation -->
                <div class="phrase-context-box">
                    <div class="phrase-context-icon">ğŸ’¬</div>
                    <div>
                        <strong>Quand l'utiliser :</strong>
                        <p id="modal-phrase-context">Avant de manger</p>
                    </div>
                </div>

                <!-- Explication culturelle -->
                <div class="phrase-cultural-box">
                    <h4 class="phrase-section-title">ğŸŒ¸ Signification Culturelle</h4>
                    <p id="modal-phrase-cultural">Cette phrase exprime...</p>
                </div>

                <!-- Origine historique -->
                <div class="phrase-historical-box">
                    <h4 class="phrase-section-title">ğŸ“œ Origine Historique</h4>
                    <p id="modal-phrase-historical">Du verbe 'itadaku'...</p>
                </div>

                <!-- Conseil d'usage -->
                <div class="phrase-usage-box">
                    <h4 class="phrase-section-title">ğŸ’¡ Conseil d'Usage</h4>
                    <p id="modal-phrase-usage">Dire en joignant les mains...</p>
                </div>

                <!-- Bouton audio (Ã  implÃ©menter) -->
                <button class="phrase-audio-btn" id="play-phrase-audio" disabled>
                    <span>ğŸ”Š</span>
                    <span>Ã‰couter la prononciation</span>
                    <span class="phrase-audio-hint">(BientÃ´t disponible)</span>
                </button>

                <!-- Boutons de partage (Ã  implÃ©menter) -->
                <div class="phrase-share-buttons">
                    <button class="phrase-share-btn" id="share-twitter">
                        <span>ğŸ¦</span> Twitter
                    </button>
                    <button class="phrase-share-btn" id="share-facebook">
                        <span>ğŸ“˜</span> Facebook
                    </button>
                    <button class="phrase-share-btn" id="copy-phrase">
                        <span>ğŸ“‹</span> Copier
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <!-- Supabase SDK (CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- Scripts de l'application -->
    <script src="lessons-data.js?v=4.9.1"></script>
    <script src="story-mode.js?v=4.9.1"></script>
    <script src="story-mode-ui.js?v=4.9.1"></script>
    <script src="cultural-phrases.js?v=4.9.1"></script>
    <script src="cultural-phrase-ui.js?v=4.9.1"></script>
    <script src="supabase-config.js?v=4.9.1"></script>
    <script src="leaderboard.js?v=4.9.1"></script>
    <script src="app.js?v=4.9.1"></script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(registration => {
                        console.log('Service Worker enregistrÃ© avec succÃ¨s:', registration.scope);
                    })
                    .catch(error => {
                        console.log('Ã‰chec de l\'enregistrement du Service Worker:', error);
                    });
            });
        }
    </script>
</body>
</html>
