<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Apprenez le japonais : hiragana, katakana et vocabulaire">
    <meta name="theme-color" content="#667eea">
    <title>Apprendre le Japonais - Hiragana</title>
    <link rel="stylesheet" href="style.css?v=5.4.0">
    <link rel="stylesheet" href="srs-styles.css?v=5.5.3">
    <link rel="stylesheet" href="lives-styles.css?v=5.5.1">
    <link rel="stylesheet" href="animations.css?v=1.0">
    <link rel="manifest" href="manifest.json">
    <style>
        /* ===== D√âFIS QUOTIDIENS ===== */
        .daily-challenge-section {
            margin-bottom: 24px;
        }

        .daily-challenge-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 20px;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(245, 87, 108, 0.3);
            display: grid;
            grid-template-columns: auto 1fr auto auto;
            gap: 16px;
            align-items: center;
        }

        .challenge-icon {
            font-size: 48px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .challenge-info {
            flex: 1;
        }

        .challenge-title {
            color: white;
            font-size: 20px;
            font-weight: 700;
            margin: 0 0 4px 0;
        }

        .challenge-description {
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            margin: 0;
        }

        .challenge-stats {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 16px;
            border-radius: 20px;
            color: white;
            font-size: 14px;
            font-weight: 600;
        }

        .challenge-btn {
            background: white !important;
            color: #f5576c !important;
            padding: 12px 24px;
            font-weight: 700;
        }

        .challenge-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
        }

        /* Modal */
        .challenge-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.3s ease;
        }

        .challenge-modal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
        }

        .challenge-modal-container {
            position: relative;
            background: white;
            border-radius: 24px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            padding: 32px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.4s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .challenge-modal-close {
            position: absolute;
            top: 16px;
            right: 16px;
            background: #f3f4f6;
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            color: #6b7280;
            transition: all 0.2s ease;
        }

        .challenge-modal-close:hover {
            background: #e5e7eb;
            transform: rotate(90deg);
        }

        .challenge-header {
            text-align: center;
            margin-bottom: 24px;
        }

        .challenge-header h2 {
            font-size: 28px;
            margin: 0 0 8px 0;
            color: #1f2937;
        }

        .challenge-difficulty {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .difficulty-easy {
            background: #d1fae5;
            color: #065f46;
        }

        .difficulty-medium {
            background: #fef3c7;
            color: #92400e;
        }

        .difficulty-hard {
            background: #fee2e2;
            color: #991b1b;
        }

        /* Proverbe */
        .proverb-container {
            text-align: center;
        }

        .proverb-japanese {
            font-size: 48px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 16px;
        }

        .proverb-hiragana {
            font-size: 24px;
            color: #6b7280;
            margin-bottom: 8px;
        }

        .proverb-romaji {
            font-size: 18px;
            color: #9ca3af;
            font-style: italic;
            margin-bottom: 32px;
        }

        .proverb-challenge {
            text-align: left;
            margin-top: 32px;
        }

        .proverb-challenge.hidden {
            filter: blur(8px);
            user-select: none;
            pointer-events: none;
        }

        .proverb-challenge.revealed {
            animation: revealFade 0.5s ease;
        }

        @keyframes revealFade {
            from {
                opacity: 0;
                filter: blur(8px);
            }
            to {
                opacity: 1;
                filter: blur(0);
            }
        }

        .challenge-separator {
            border-top: 2px solid #e5e7eb;
            margin: 24px 0 16px 0;
            padding-top: 16px;
            text-align: center;
        }

        .challenge-separator span {
            background: white;
            padding: 0 12px;
            color: #667eea;
            font-weight: 600;
            font-size: 14px;
            text-transform: uppercase;
        }

        .proverb-translation {
            font-size: 22px;
            font-weight: 600;
            color: #667eea;
            margin-bottom: 16px;
        }

        .proverb-meaning,
        .proverb-cultural {
            font-size: 16px;
            line-height: 1.6;
            color: #4b5563;
        }

        .proverb-category {
            text-align: center;
            margin-top: 24px;
        }

        .category-tag {
            display: inline-block;
            background: #ede9fe;
            color: #6d28d9;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        /* Menu */
        .restaurant-name {
            font-size: 20px;
            color: #6b7280;
        }

        .menu-container {
            padding: 16px 0;
        }

        .menu-items {
            display: grid;
            gap: 16px;
            margin-bottom: 24px;
        }

        .menu-item {
            background: #f9fafb;
            padding: 16px;
            border-radius: 12px;
            border-left: 4px solid #667eea;
        }

        .menu-item.hidden .menu-item-details {
            filter: blur(8px);
            user-select: none;
            pointer-events: none;
        }

        .menu-item.revealed {
            animation: revealFade 0.5s ease;
        }

        .menu-item-japanese {
            font-size: 24px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 8px;
        }

        .menu-number {
            display: inline-block;
            background: #667eea;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            text-align: center;
            line-height: 28px;
            font-size: 14px;
            margin-right: 8px;
        }

        .menu-item-hiragana {
            font-size: 16px;
            color: #6b7280;
            margin-bottom: 4px;
        }

        .menu-item-romaji {
            font-size: 14px;
            color: #9ca3af;
            font-style: italic;
            margin-bottom: 12px;
        }

        .menu-item-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 12px;
            border-top: 1px solid #e5e7eb;
        }

        .menu-item-french {
            font-size: 16px;
            color: #374151;
            font-weight: 600;
        }

        .menu-item-price {
            font-size: 18px;
            color: #667eea;
            font-weight: 700;
        }

        .menu-cultural-note {
            background: #fef3c7;
            padding: 16px;
            border-radius: 12px;
            border-left: 4px solid #f59e0b;
            margin-bottom: 24px;
        }

        .menu-cultural-note strong {
            color: #92400e;
        }

        .menu-cultural-note p {
            margin: 8px 0 0 0;
            color: #78350f;
            line-height: 1.6;
        }

        /* Boutons */
        .reveal-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .reveal-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .reveal-btn:active {
            transform: translateY(0);
        }

        .completed-badge {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 16px;
            border-radius: 12px;
            text-align: center;
            font-size: 18px;
            font-weight: 700;
            margin-top: 24px;
            animation: completionPop 0.5s ease;
        }

        @keyframes completionPop {
            0% {
                transform: scale(0.8);
                opacity: 0;
            }
            50% {
                transform: scale(1.1);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <!-- Container principal -->
    <div id="app">
        <!-- √âcran de chargement -->
        <div id="loading-screen" class="screen">
            <div class="loading-content">
                <h1 class="loading-title">Êó•Êú¨Ë™û</h1>
                <p class="loading-subtitle">Apprendre le Japonais</p>
                <div class="loading-spinner"></div>
            </div>
        </div>

        <!-- √âcran d'accueil -->
        <div id="home-screen" class="screen" style="display: none;">
            <header class="app-header">
                <h1 class="app-title">üìö Apprendre le Japonais</h1>
                <div class="user-stats">
                    <div class="stat-item">
                        <span class="stat-icon">üèÜ</span>
                        <span class="stat-value" id="user-level">1</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">‚≠ê</span>
                        <span class="stat-value" id="user-xp">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">üî•</span>
                        <span class="stat-value" id="user-streak">0</span>
                    </div>
                    <!-- Lives indicator -->
                    <div class="stat-item" id="lives-container-header">
                        <!-- Inject√© par lives-ui.js -->
                    </div>
                </div>
            </header>

            <div class="content">
                <section class="progress-section">
                    <h2 class="section-title">Votre progression</h2>
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="global-progress" style="width: 0%"></div>
                    </div>
                    <p class="progress-text"><span id="completed-lessons">0</span>/10 le√ßons compl√©t√©es</p>
                </section>

                <!-- Mode Express 90s -->
                <div class="express-mode-section">
                    <div class="express-mode-card">
                        <div class="express-mode-icon">‚ö°</div>
                        <div class="express-mode-info">
                            <h3 class="express-mode-title">Mode Express 90s</h3>
                            <p class="express-mode-description">5 questions ¬∑ Chrono 90 secondes</p>
                        </div>
                        <button class="primary-btn express-btn" id="start-express-btn">GO!</button>
                    </div>
                </div>

                <!-- D√©fi Quotidien -->
                <div class="daily-challenge-section">
                    <div class="daily-challenge-card">
                        <div class="challenge-icon" id="challenge-icon">üéã</div>
                        <div class="challenge-info">
                            <h3 class="challenge-title" id="challenge-title">D√©fi du Jour</h3>
                            <p class="challenge-description" id="challenge-description">D√©couvre le proverbe japonais du jour</p>
                        </div>
                        <div class="challenge-stats">
                            <span id="challenges-completed">0</span> compl√©t√©s
                        </div>
                        <button class="primary-btn challenge-btn" id="start-challenge-btn">D√©couvrir üéØ</button>
                    </div>
                </div>

                <!-- Phrase Culturelle du Jour -->
                <div class="cultural-phrase-section">
                    <div class="cultural-phrase-card" id="cultural-phrase-card">
                        <div class="cultural-phrase-header">
                            <div class="cultural-phrase-date">
                                <span class="cultural-phrase-icon">üå∏</span>
                                <span class="cultural-phrase-label">PHRASE DU JOUR</span>
                            </div>
                            <div class="cultural-phrase-collection">
                                <span id="viewed-phrases-count">0</span>/30
                            </div>
                        </div>
                        <div class="cultural-phrase-content">
                            <div class="cultural-phrase-japanese">
                                <div class="cultural-phrase-hiragana" id="today-phrase-hiragana">„ÅÑ„Åü„Å†„Åç„Åæ„Åô</div>
                                <div class="cultural-phrase-romaji" id="today-phrase-romaji">Itadakimasu</div>
                            </div>
                            <div class="cultural-phrase-french" id="today-phrase-french">Bon app√©tit !</div>
                            <button class="cultural-phrase-btn" id="view-phrase-detail-btn">
                                D√©couvrir <span class="cultural-phrase-arrow">‚Üí</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Bouton Mode R√©vision -->
                <div id="review-mode-section" class="review-mode-section" style="display: none;">
                    <div class="review-mode-card">
                        <div class="review-mode-icon">üîÑ</div>
                        <div class="review-mode-info">
                            <h3 class="review-mode-title">Mode R√©vision</h3>
                            <p class="review-mode-description"><span id="mistakes-count">0</span> caract√®re(s) √† r√©viser</p>
                        </div>
                        <button class="primary-btn" id="start-review-btn">Commencer</button>
                    </div>
                </div>

                <!-- Syst√®me de R√©p√©tition Espac√©e (SRS) -->
                <div id="srs-mode-section" class="review-mode-section">
                    <div class="review-mode-card srs-card">
                        <div class="review-mode-icon">üß†</div>
                        <div class="review-mode-info">
                            <h3 class="review-mode-title">R√©visions SRS</h3>
                            <p class="review-mode-description"><span id="srs-due-count">0</span> carte(s) √† r√©viser ‚Ä¢ Syst√®me de r√©p√©tition optimis√©</p>
                        </div>
                        <button class="primary-btn" id="start-srs-btn">R√©viser</button>
                    </div>
                </div>

                <section class="lessons-section">
                    <div class="lessons-header">
                        <h2 class="section-title" id="lessons-title">Le√ßons d'hiragana</h2>
                        <div class="script-toggle">
                            <button class="toggle-btn active" id="hiragana-tab" data-script="hiragana">Hiragana</button>
                            <button class="toggle-btn" id="katakana-tab" data-script="katakana">Katakana</button>
                            <button class="toggle-btn" id="kanji-tab" data-script="kanji">Kanji <span class="new-badge">NEW</span></button>
                        </div>
                    </div>
                    <div id="lessons-list" class="lessons-grid">
                        <!-- Les le√ßons seront ins√©r√©es ici par JavaScript -->
                    </div>
                </section>
            </div>

            <footer class="app-footer">
                <button class="footer-btn" id="stats-btn">
                    <span class="btn-icon">üìä</span>
                    <span class="btn-label">Statistiques</span>
                </button>
                <button class="footer-btn" id="leaderboard-btn">
                    <span class="btn-icon">üèÜ</span>
                    <span class="btn-label">Classement</span>
                </button>
                <button class="footer-btn" id="badges-btn">
                    <span class="btn-icon">üèÖ</span>
                    <span class="btn-label">Badges</span>
                </button>
                <button class="footer-btn" id="settings-btn">
                    <span class="btn-icon">‚öôÔ∏è</span>
                    <span class="btn-label">R√©glages</span>
                </button>
            </footer>
        </div>

        <!-- √âcran de configuration de le√ßon -->
        <div id="config-screen" class="screen" style="display: none;">
            <header class="lesson-header">
                <button class="back-btn" id="config-back-btn">‚Üê Retour</button>
                <h2 class="lesson-title" id="config-lesson-title">Le√ßon 1</h2>
            </header>

            <div class="content config-content">
                <div class="config-card">
                    <h3 class="config-title">‚öôÔ∏è Configuration de la le√ßon</h3>
                    <p class="config-description" id="config-description">Choisissez le nombre de questions</p>

                    <div class="config-options">
                        <button class="config-option active" data-questions="10">
                            <span class="option-number">10</span>
                            <span class="option-label">questions</span>
                            <span class="option-time">~5 min</span>
                        </button>
                        <button class="config-option" data-questions="15">
                            <span class="option-number">15</span>
                            <span class="option-label">questions</span>
                            <span class="option-time">~8 min</span>
                        </button>
                        <button class="config-option" data-questions="20">
                            <span class="option-number">20</span>
                            <span class="option-label">questions</span>
                            <span class="option-time">~10 min</span>
                        </button>
                    </div>

                    <button class="start-lesson-btn" id="start-lesson-btn">
                        Commencer la le√ßon
                    </button>
                </div>
            </div>
        </div>

        <!-- √âcran de le√ßon -->
        <div id="lesson-screen" class="screen" style="display: none;">
            <header class="lesson-header">
                <button class="back-btn" id="lesson-back-btn">‚Üê Quitter</button>
                <div class="lesson-progress">
                    <span id="current-question">1</span>/<span id="total-questions">10</span>
                </div>
                <div class="lesson-score">
                    Score: <span id="current-score">0</span>
                </div>
            </header>

            <div class="lesson-progress-bar-container">
                <div class="lesson-progress-bar" id="lesson-progress-bar" style="width: 0%"></div>
            </div>

            <div class="content lesson-content" id="exercise-container">
                <!-- Les exercices seront ins√©r√©s ici dynamiquement -->
            </div>
        </div>

        <!-- √âcran de r√©sultats -->
        <div id="results-screen" class="screen" style="display: none;">
            <div class="content results-content">
                <div class="results-card">
                    <div class="results-icon" id="results-icon">üéâ</div>
                    <h2 class="results-title" id="results-title">F√©licitations !</h2>
                    <p class="results-subtitle" id="results-subtitle">Le√ßon termin√©e</p>

                    <div class="results-stats">
                        <div class="result-stat">
                            <span class="result-stat-label">Score</span>
                            <span class="result-stat-value" id="final-score">0/10</span>
                        </div>
                        <div class="result-stat">
                            <span class="result-stat-label">Pr√©cision</span>
                            <span class="result-stat-value" id="final-accuracy">0%</span>
                        </div>
                        <div class="result-stat">
                            <span class="result-stat-label">Points gagn√©s</span>
                            <span class="result-stat-value" id="points-earned">+0</span>
                        </div>
                    </div>

                    <div class="results-badges" id="results-badges" style="display: none;">
                        <h3 class="badges-title">üèÖ Nouveaux badges d√©bloqu√©s !</h3>
                        <div id="unlocked-badges-list" class="unlocked-badges-list">
                            <!-- Les badges d√©bloqu√©s seront ins√©r√©s ici -->
                        </div>
                    </div>

                    <div class="results-actions">
                        <button class="secondary-btn" id="retry-btn">üîÑ Refaire</button>
                        <button class="primary-btn" id="continue-btn">‚úÖ Continuer</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- √âcran des badges -->
        <div id="badges-screen" class="screen" style="display: none;">
            <header class="lesson-header">
                <button class="back-btn" id="badges-back-btn">‚Üê Retour</button>
                <h2 class="lesson-title">üèÖ Mes Badges</h2>
            </header>

            <div class="content">
                <div id="badges-list" class="badges-grid">
                    <!-- Les badges seront ins√©r√©s ici -->
                </div>
            </div>
        </div>

        <!-- √âcran des statistiques -->
        <div id="stats-screen" class="screen" style="display: none;">
            <header class="lesson-header">
                <button class="back-btn" id="stats-back-btn">‚Üê Retour</button>
                <h2 class="lesson-title">üìä Mes Statistiques</h2>
            </header>

            <div class="content stats-content">
                <!-- Carte du profil utilisateur -->
                <div class="stats-card profile-card">
                    <div class="profile-header">
                        <div class="profile-avatar">üë§</div>
                        <div class="profile-info">
                            <h3 class="profile-name">Niveau <span id="stats-level">1</span></h3>
                            <div class="profile-progress-bar">
                                <div class="profile-progress-fill" id="stats-level-progress" style="width: 0%"></div>
                            </div>
                            <p class="profile-next-level"><span id="stats-points-to-next">100</span> points pour le niveau suivant</p>
                        </div>
                    </div>

                    <div class="profile-stats-grid">
                        <div class="profile-stat">
                            <span class="profile-stat-icon">‚≠ê</span>
                            <span class="profile-stat-value" id="stats-total-points">0</span>
                            <span class="profile-stat-label">Points totaux</span>
                        </div>
                        <div class="profile-stat">
                            <span class="profile-stat-icon">üî•</span>
                            <span class="profile-stat-value" id="stats-streak">0</span>
                            <span class="profile-stat-label">Jours cons√©cutifs</span>
                        </div>
                        <div class="profile-stat">
                            <span class="profile-stat-icon">üìö</span>
                            <span class="profile-stat-value" id="stats-lessons-completed">0</span>
                            <span class="profile-stat-label">Le√ßons r√©ussies</span>
                        </div>
                        <div class="profile-stat">
                            <span class="profile-stat-icon">üèÖ</span>
                            <span class="profile-stat-value" id="stats-badges-count">0</span>
                            <span class="profile-stat-label">Badges d√©bloqu√©s</span>
                        </div>
                    </div>
                </div>

                <!-- Carte de progression des le√ßons -->
                <div class="stats-card">
                    <h3 class="stats-card-title">üìñ Progression des le√ßons</h3>
                    <div id="lessons-stats-list" class="lessons-stats-list">
                        <!-- Les statistiques des le√ßons seront ins√©r√©es ici -->
                    </div>
                </div>

                <!-- Carte des activit√©s r√©centes -->
                <div class="stats-card">
                    <h3 class="stats-card-title">üìÖ Activit√© r√©cente</h3>
                    <div class="activity-item">
                        <span class="activity-icon">üìÜ</span>
                        <div class="activity-info">
                            <span class="activity-label">Derni√®re session</span>
                            <span class="activity-value" id="stats-last-study">Jamais</span>
                        </div>
                    </div>
                    <div class="activity-item">
                        <span class="activity-icon">‚úçÔ∏è</span>
                        <div class="activity-info">
                            <span class="activity-label">Transcriptions compl√©t√©es</span>
                            <span class="activity-value" id="stats-transcriptions">0</span>
                        </div>
                    </div>
                    <div class="activity-item">
                        <span class="activity-icon">üìù</span>
                        <div class="activity-info">
                            <span class="activity-label">Mots appris</span>
                            <span class="activity-value" id="stats-words">0</span>
                        </div>
                    </div>
                </div>

                <!-- Carte des caract√®res √† r√©viser -->
                <div id="mistakes-stats-card" class="stats-card" style="display: none;">
                    <h3 class="stats-card-title">üîÑ Caract√®res √† r√©viser</h3>
                    <div id="mistakes-stats-list" class="mistakes-stats-list">
                        <!-- Les caract√®res avec erreurs seront ins√©r√©s ici -->
                    </div>
                </div>
            </div>
        </div>

        <!-- √âcran Leaderboard -->
        <div id="leaderboard-screen" class="screen" style="display: none;">
            <header class="lesson-header">
                <button class="back-btn" id="leaderboard-back-btn">‚Üê Retour</button>
                <h2 class="lesson-title">üèÜ Classement Mondial</h2>
            </header>

            <div class="content">
                <!-- Carte du rang de l'utilisateur -->
                <div id="user-rank-card" class="user-rank-card" style="display: none;">
                    <h3 class="user-rank-title">Votre classement</h3>
                    <div class="user-rank-info">
                        <div class="user-rank-position" id="user-rank-position">#-</div>
                        <div class="user-rank-details">
                            <div class="user-rank-username" id="user-rank-username">Username</div>
                            <div class="user-rank-xp"><span id="user-rank-xp">0</span> XP</div>
                        </div>
                    </div>
                </div>

                <!-- Top 50 mondial -->
                <div class="leaderboard-container">
                    <h3 class="leaderboard-header">üåç Top 50 Mondial</h3>
                    <div id="leaderboard-list" class="leaderboard-list">
                        <!-- Les entr√©es du leaderboard seront ins√©r√©es ici -->
                    </div>
                </div>
            </div>
        </div>

        <!-- √âcran Mode Express - Jeu -->
        <div id="express-game-screen" class="screen" style="display: none;">
            <header class="lesson-header express-header">
                <button class="back-btn" id="express-quit-btn">‚úï Quitter</button>
                <div class="express-timer-container">
                    <span class="express-timer-icon">‚è±Ô∏è</span>
                    <span class="express-timer" id="express-timer">90</span>
                </div>
                <div class="express-progress">
                    <span id="express-current-q">1</span>/<span id="express-total-q">5</span>
                </div>
            </header>

            <div class="content express-content">
                <div id="express-question-container" class="express-question">
                    <!-- Les questions seront ins√©r√©es ici -->
                </div>
            </div>
        </div>

        <!-- √âcran Mode Express - R√©sultats -->
        <div id="express-results-screen" class="screen" style="display: none;">
            <header class="lesson-header">
                <h2 class="lesson-title">‚ö° Mode Express 90s</h2>
            </header>

            <div class="content express-results-content">
                <div class="express-results-card">
                    <div class="express-results-score">
                        <div class="express-score-circle">
                            <span class="express-score-value" id="express-final-score">0</span>
                            <span class="express-score-total">/5</span>
                        </div>
                        <h3 class="express-results-title" id="express-results-title">Bravo !</h3>
                        <p class="express-results-time">
                            Compl√©t√© en <span id="express-time-taken">0</span>s
                        </p>
                    </div>

                    <div class="express-results-stats">
                        <div class="express-stat">
                            <span class="express-stat-icon">‚úÖ</span>
                            <span class="express-stat-value" id="express-correct">0</span>
                            <span class="express-stat-label">Corrects</span>
                        </div>
                        <div class="express-stat">
                            <span class="express-stat-icon">‚ùå</span>
                            <span class="express-stat-value" id="express-wrong">0</span>
                            <span class="express-stat-label">Erreurs</span>
                        </div>
                    </div>

                    <div class="express-results-actions">
                        <button class="primary-btn" id="express-retry-btn">üîÑ Rejouer</button>
                        <button class="secondary-btn" id="express-home-btn">üè† Accueil</button>
                    </div>
                </div>

                <!-- Canvas pour les confettis -->
                <canvas id="confetti-canvas" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;"></canvas>
            </div>
        </div>
    </div>

    </div>

    <!-- Modal de badge d√©bloqu√© -->
    <div id="badge-modal" class="modal" style="display: none;">
        <div class="modal-overlay"></div>
        <div class="modal-content badge-modal-content">
            <div class="badge-unlock-animation">
                <div class="badge-icon-large" id="modal-badge-icon">üèÜ</div>
                <h3 class="badge-unlock-title">Nouveau badge d√©bloqu√© !</h3>
                <h4 class="badge-name" id="modal-badge-name">Badge Name</h4>
                <p class="badge-description" id="modal-badge-description">Description</p>
                <button class="primary-btn" id="close-badge-modal">Super !</button>
            </div>
        </div>
    </div>

    <!-- Modal Phrase Culturelle -->
    <div id="phrase-modal" class="modal" style="display: none;">
        <div class="modal-overlay" id="phrase-modal-overlay"></div>
        <div class="modal-content phrase-modal-content">
            <button class="modal-close-btn" id="close-phrase-modal">‚úï</button>

            <div class="phrase-detail">
                <!-- En-t√™te avec ic√¥ne et cat√©gorie -->
                <div class="phrase-header-detail">
                    <div class="phrase-icon-large" id="modal-phrase-icon">üç±</div>
                    <div class="phrase-category-badge" id="modal-phrase-category">Nourriture</div>
                </div>

                <!-- Expression japonaise -->
                <div class="phrase-japanese-detail">
                    <div class="phrase-hiragana-large" id="modal-phrase-hiragana">„ÅÑ„Åü„Å†„Åç„Åæ„Åô</div>
                    <div class="phrase-romaji-detail" id="modal-phrase-romaji">Itadakimasu</div>
                </div>

                <!-- Traduction et sens litt√©ral -->
                <div class="phrase-translations">
                    <div class="phrase-french-detail" id="modal-phrase-french">Bon app√©tit !</div>
                    <div class="phrase-literal" id="modal-phrase-literal">
                        <strong>Sens litt√©ral :</strong> Je re√ßois humblement
                    </div>
                </div>

                <!-- Contexte d'utilisation -->
                <div class="phrase-context-box">
                    <div class="phrase-context-icon">üí¨</div>
                    <div>
                        <strong>Quand l'utiliser :</strong>
                        <p id="modal-phrase-context">Avant de manger</p>
                    </div>
                </div>

                <!-- Explication culturelle -->
                <div class="phrase-cultural-box">
                    <h4 class="phrase-section-title">üå∏ Signification Culturelle</h4>
                    <p id="modal-phrase-cultural">Cette phrase exprime...</p>
                </div>

                <!-- Origine historique -->
                <div class="phrase-historical-box">
                    <h4 class="phrase-section-title">üìú Origine Historique</h4>
                    <p id="modal-phrase-historical">Du verbe 'itadaku'...</p>
                </div>

                <!-- Conseil d'usage -->
                <div class="phrase-usage-box">
                    <h4 class="phrase-section-title">üí° Conseil d'Usage</h4>
                    <p id="modal-phrase-usage">Dire en joignant les mains...</p>
                </div>

                <!-- Bouton audio (√† impl√©menter) -->
                <button class="phrase-audio-btn" id="play-phrase-audio" disabled>
                    <span>üîä</span>
                    <span>√âcouter la prononciation</span>
                    <span class="phrase-audio-hint">(Bient√¥t disponible)</span>
                </button>

                <!-- Boutons de partage (√† impl√©menter) -->
                <div class="phrase-share-buttons">
                    <button class="phrase-share-btn" id="share-twitter">
                        <span>üê¶</span> Twitter
                    </button>
                    <button class="phrase-share-btn" id="share-facebook">
                        <span>üìò</span> Facebook
                    </button>
                    <button class="phrase-share-btn" id="copy-phrase">
                        <span>üìã</span> Copier
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <!-- Supabase SDK (CDN) - D√âSACTIV√â TEMPORAIREMENT -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script> -->

    <!-- Scripts de l'application -->
    <script src="kanji-data.js?v=5.4.0"></script>
    <script src="lessons-data.js?v=5.4.0"></script>
    <script src="cultural-phrases.js?v=5.4.0"></script>
    <script src="cultural-phrase-ui.js?v=5.4.0"></script>
    <script src="daily-challenges.js?v=5.4.0"></script>
    <script src="daily-challenges-ui.js?v=5.4.0"></script>
    <!-- SRS (Spaced Repetition System) -->
    <script src="srs.js?v=5.4.0"></script>
    <script src="srs-storage.js?v=5.4.0"></script>
    <!-- Lives System (Gamification) -->
    <script src="lives-system.js?v=5.5.3"></script>
    <script src="lives-ui.js?v=5.5.3"></script>
    <script src="srs-ui-v2.js?v=5.5.2"></script>
    <script src="srs-screen.js?v=5.4.0"></script>
    <script src="app.js?v=5.5.2"></script>

    <!-- Modal D√©fi Quotidien -->
    <div id="challenge-modal" class="challenge-modal" style="display: none; opacity: 0;">
        <div class="challenge-modal-overlay" onclick="closeChallengeModal()"></div>
        <div class="challenge-modal-container">
            <button class="challenge-modal-close" onclick="closeChallengeModal()">‚úï</button>
            <div id="challenge-modal-content"></div>
        </div>
    </div>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(registration => {
                        console.log('Service Worker enregistr√© avec succ√®s:', registration.scope);
                    })
                    .catch(error => {
                        console.log('√âchec de l\'enregistrement du Service Worker:', error);
                    });
            });
        }
    </script>
</body>
</html>
