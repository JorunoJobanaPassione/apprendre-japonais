<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Apprenez le japonais : hiragana, katakana et vocabulaire">
    <meta name="theme-color" content="#667eea">
    <title>Apprendre le Japonais - Hiragana</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <!-- Container principal -->
    <div id="app">
        <!-- √âcran de chargement -->
        <div id="loading-screen" class="screen">
            <div class="loading-content">
                <h1 class="loading-title">Êó•Êú¨Ë™û</h1>
                <p class="loading-subtitle">Apprendre le Japonais</p>
                <div class="loading-spinner"></div>
            </div>
        </div>

        <!-- √âcran d'accueil -->
        <div id="home-screen" class="screen" style="display: none;">
            <header class="app-header">
                <h1 class="app-title">üìö Apprendre le Japonais</h1>
                <div class="user-stats">
                    <div class="stat-item">
                        <span class="stat-icon">üèÜ</span>
                        <span class="stat-value" id="user-level">1</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">‚≠ê</span>
                        <span class="stat-value" id="user-points">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">üî•</span>
                        <span class="stat-value" id="user-streak">0</span>
                    </div>
                </div>
            </header>

            <div class="content">
                <section class="progress-section">
                    <h2 class="section-title">Votre progression</h2>
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="global-progress" style="width: 0%"></div>
                    </div>
                    <p class="progress-text"><span id="completed-lessons">0</span>/10 le√ßons compl√©t√©es</p>
                </section>

                <!-- Bouton Mode R√©vision -->
                <div id="review-mode-section" class="review-mode-section" style="display: none;">
                    <div class="review-mode-card">
                        <div class="review-mode-icon">üîÑ</div>
                        <div class="review-mode-info">
                            <h3 class="review-mode-title">Mode R√©vision</h3>
                            <p class="review-mode-description"><span id="mistakes-count">0</span> caract√®re(s) √† r√©viser</p>
                        </div>
                        <button class="primary-btn" id="start-review-btn">Commencer</button>
                    </div>
                </div>

                <section class="lessons-section">
                    <h2 class="section-title">Le√ßons d'hiragana</h2>
                    <div id="lessons-list" class="lessons-grid">
                        <!-- Les le√ßons seront ins√©r√©es ici par JavaScript -->
                    </div>
                </section>
            </div>

            <footer class="app-footer">
                <button class="footer-btn" id="stats-btn">
                    <span class="btn-icon">üìä</span>
                    <span class="btn-label">Statistiques</span>
                </button>
                <button class="footer-btn" id="badges-btn">
                    <span class="btn-icon">üèÖ</span>
                    <span class="btn-label">Badges</span>
                </button>
                <button class="footer-btn" id="settings-btn">
                    <span class="btn-icon">‚öôÔ∏è</span>
                    <span class="btn-label">R√©glages</span>
                </button>
            </footer>
        </div>

        <!-- √âcran de configuration de le√ßon -->
        <div id="config-screen" class="screen" style="display: none;">
            <header class="lesson-header">
                <button class="back-btn" id="config-back-btn">‚Üê Retour</button>
                <h2 class="lesson-title" id="config-lesson-title">Le√ßon 1</h2>
            </header>

            <div class="content config-content">
                <div class="config-card">
                    <h3 class="config-title">‚öôÔ∏è Configuration de la le√ßon</h3>
                    <p class="config-description" id="config-description">Choisissez le nombre de questions</p>

                    <div class="config-options">
                        <button class="config-option active" data-questions="10">
                            <span class="option-number">10</span>
                            <span class="option-label">questions</span>
                            <span class="option-time">~5 min</span>
                        </button>
                        <button class="config-option" data-questions="15">
                            <span class="option-number">15</span>
                            <span class="option-label">questions</span>
                            <span class="option-time">~8 min</span>
                        </button>
                        <button class="config-option" data-questions="20">
                            <span class="option-number">20</span>
                            <span class="option-label">questions</span>
                            <span class="option-time">~10 min</span>
                        </button>
                    </div>

                    <button class="start-lesson-btn" id="start-lesson-btn">
                        Commencer la le√ßon
                    </button>
                </div>
            </div>
        </div>

        <!-- √âcran de le√ßon -->
        <div id="lesson-screen" class="screen" style="display: none;">
            <header class="lesson-header">
                <button class="back-btn" id="lesson-back-btn">‚Üê Quitter</button>
                <div class="lesson-progress">
                    <span id="current-question">1</span>/<span id="total-questions">10</span>
                </div>
                <div class="lesson-score">
                    Score: <span id="current-score">0</span>
                </div>
            </header>

            <div class="lesson-progress-bar-container">
                <div class="lesson-progress-bar" id="lesson-progress-bar" style="width: 0%"></div>
            </div>

            <div class="content lesson-content" id="exercise-container">
                <!-- Les exercices seront ins√©r√©s ici dynamiquement -->
            </div>
        </div>

        <!-- √âcran de r√©sultats -->
        <div id="results-screen" class="screen" style="display: none;">
            <div class="content results-content">
                <div class="results-card">
                    <div class="results-icon" id="results-icon">üéâ</div>
                    <h2 class="results-title" id="results-title">F√©licitations !</h2>
                    <p class="results-subtitle" id="results-subtitle">Le√ßon termin√©e</p>

                    <div class="results-stats">
                        <div class="result-stat">
                            <span class="result-stat-label">Score</span>
                            <span class="result-stat-value" id="final-score">0/10</span>
                        </div>
                        <div class="result-stat">
                            <span class="result-stat-label">Pr√©cision</span>
                            <span class="result-stat-value" id="final-accuracy">0%</span>
                        </div>
                        <div class="result-stat">
                            <span class="result-stat-label">Points gagn√©s</span>
                            <span class="result-stat-value" id="points-earned">+0</span>
                        </div>
                    </div>

                    <div class="results-badges" id="results-badges" style="display: none;">
                        <h3 class="badges-title">üèÖ Nouveaux badges d√©bloqu√©s !</h3>
                        <div id="unlocked-badges-list" class="unlocked-badges-list">
                            <!-- Les badges d√©bloqu√©s seront ins√©r√©s ici -->
                        </div>
                    </div>

                    <div class="results-actions">
                        <button class="secondary-btn" id="retry-btn">üîÑ Refaire</button>
                        <button class="primary-btn" id="continue-btn">‚úÖ Continuer</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- √âcran des badges -->
        <div id="badges-screen" class="screen" style="display: none;">
            <header class="lesson-header">
                <button class="back-btn" id="badges-back-btn">‚Üê Retour</button>
                <h2 class="lesson-title">üèÖ Mes Badges</h2>
            </header>

            <div class="content">
                <div id="badges-list" class="badges-grid">
                    <!-- Les badges seront ins√©r√©s ici -->
                </div>
            </div>
        </div>

        <!-- √âcran des statistiques -->
        <div id="stats-screen" class="screen" style="display: none;">
            <header class="lesson-header">
                <button class="back-btn" id="stats-back-btn">‚Üê Retour</button>
                <h2 class="lesson-title">üìä Mes Statistiques</h2>
            </header>

            <div class="content stats-content">
                <!-- Carte du profil utilisateur -->
                <div class="stats-card profile-card">
                    <div class="profile-header">
                        <div class="profile-avatar">üë§</div>
                        <div class="profile-info">
                            <h3 class="profile-name">Niveau <span id="stats-level">1</span></h3>
                            <div class="profile-progress-bar">
                                <div class="profile-progress-fill" id="stats-level-progress" style="width: 0%"></div>
                            </div>
                            <p class="profile-next-level"><span id="stats-points-to-next">100</span> points pour le niveau suivant</p>
                        </div>
                    </div>

                    <div class="profile-stats-grid">
                        <div class="profile-stat">
                            <span class="profile-stat-icon">‚≠ê</span>
                            <span class="profile-stat-value" id="stats-total-points">0</span>
                            <span class="profile-stat-label">Points totaux</span>
                        </div>
                        <div class="profile-stat">
                            <span class="profile-stat-icon">üî•</span>
                            <span class="profile-stat-value" id="stats-streak">0</span>
                            <span class="profile-stat-label">Jours cons√©cutifs</span>
                        </div>
                        <div class="profile-stat">
                            <span class="profile-stat-icon">üìö</span>
                            <span class="profile-stat-value" id="stats-lessons-completed">0</span>
                            <span class="profile-stat-label">Le√ßons r√©ussies</span>
                        </div>
                        <div class="profile-stat">
                            <span class="profile-stat-icon">üèÖ</span>
                            <span class="profile-stat-value" id="stats-badges-count">0</span>
                            <span class="profile-stat-label">Badges d√©bloqu√©s</span>
                        </div>
                    </div>
                </div>

                <!-- Carte de progression des le√ßons -->
                <div class="stats-card">
                    <h3 class="stats-card-title">üìñ Progression des le√ßons</h3>
                    <div id="lessons-stats-list" class="lessons-stats-list">
                        <!-- Les statistiques des le√ßons seront ins√©r√©es ici -->
                    </div>
                </div>

                <!-- Carte des activit√©s r√©centes -->
                <div class="stats-card">
                    <h3 class="stats-card-title">üìÖ Activit√© r√©cente</h3>
                    <div class="activity-item">
                        <span class="activity-icon">üìÜ</span>
                        <div class="activity-info">
                            <span class="activity-label">Derni√®re session</span>
                            <span class="activity-value" id="stats-last-study">Jamais</span>
                        </div>
                    </div>
                    <div class="activity-item">
                        <span class="activity-icon">‚úçÔ∏è</span>
                        <div class="activity-info">
                            <span class="activity-label">Transcriptions compl√©t√©es</span>
                            <span class="activity-value" id="stats-transcriptions">0</span>
                        </div>
                    </div>
                    <div class="activity-item">
                        <span class="activity-icon">üìù</span>
                        <div class="activity-info">
                            <span class="activity-label">Mots appris</span>
                            <span class="activity-value" id="stats-words">0</span>
                        </div>
                    </div>
                </div>

                <!-- Carte des caract√®res √† r√©viser -->
                <div id="mistakes-stats-card" class="stats-card" style="display: none;">
                    <h3 class="stats-card-title">üîÑ Caract√®res √† r√©viser</h3>
                    <div id="mistakes-stats-list" class="mistakes-stats-list">
                        <!-- Les caract√®res avec erreurs seront ins√©r√©s ici -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de badge d√©bloqu√© -->
    <div id="badge-modal" class="modal" style="display: none;">
        <div class="modal-overlay"></div>
        <div class="modal-content badge-modal-content">
            <div class="badge-unlock-animation">
                <div class="badge-icon-large" id="modal-badge-icon">üèÜ</div>
                <h3 class="badge-unlock-title">Nouveau badge d√©bloqu√© !</h3>
                <h4 class="badge-name" id="modal-badge-name">Badge Name</h4>
                <p class="badge-description" id="modal-badge-description">Description</p>
                <button class="primary-btn" id="close-badge-modal">Super !</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="lessons-data.js?v=4.3.0"></script>
    <script src="app.js?v=4.3.0"></script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(registration => {
                        console.log('Service Worker enregistr√© avec succ√®s:', registration.scope);
                    })
                    .catch(error => {
                        console.log('√âchec de l\'enregistrement du Service Worker:', error);
                    });
            });
        }
    </script>
</body>
</html>
